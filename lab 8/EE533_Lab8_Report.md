# EE533_Lab8_Report

## 1. Instruction Part

### 1.1 Purpose

* Bubble sort the packet payload data

### 1.2 Definition

* Instruction opcode lookup table

| Instr | OP Code [31:26] |
| :---: | :-------------: |
| noop  |     000000      |
| addi  |     000001      |
| movi  |     000010      |
|  lw   |     000011      |
|  sw   |     000100      |
|  beq  |     000101      |
|  bgt  |     000110      |
|  blt  |     000111      |
|   j   |     001000      |
| subi  |     001001      |

* Instruction Table

| Addr |   Label    |        Instr         | OP Code [31:26] | Rs [25:21] | Rt [20:16] | Offset [15:0] |
| :--: | :--------: | :------------------: | :-------------: | :--------: | :--------: | :-----------: |
|  0   |            |    lw r1, r0(#3)     |     000011      |    5'd0    |    5'd1    |     16'd0     |
|  1   |            |     movi r2, #0      |     000010      |    5'd0    |    5'd2    |     16'd0     |
|  2   |            |     movi r3, #1      |     000010      |    5'd0    |    5'd3    |     16'd1     |
|  3   |            |         noop         |     000000      |    5'd0    |    5'd0    |     16'd0     |
|  4   |            |         noop         |     000000      |    5'd0    |    5'd0    |     16'd0     |
|  5   | outer_loop |   beq r1, r3, end    |     000101      |    5'd1    |    5'd3    |    16'd27     |
|  6   |            |         noop         |     000000      |    5'd0    |    5'd0    |     16'd0     |
|  7   | inner_loop | beq r3, r1, next_out |     000101      |    5'd1    |    5'd3    |    16'd21     |
|  8   |            |         noop         |     000000      |    5'd0    |    5'd0    |     16'd0     |
|  9   |            |    lw r4, r2(#1)     |     000011      |    5'd2    |    5'd4    |     16'd1     |
|  10  |            |    lw r5, r3(#1)     |     000011      |    5'd3    |    5'd5    |     16'd1     |
|  11  |            |         noop         |     000000      |    5'd0    |    5'd0    |     16'd0     |
|  12  |            |         noop         |     000000      |    5'd0    |    5'd0    |     16'd0     |
|  13  |            |         noop         |     000000      |    5'd0    |    5'd0    |     16'd0     |
|  14  |            | blt r4, r5, no_swap  |     000111      |    5'd5    |    5'd4    |    16'd18     |
|  15  |            |         noop         |     000000      |    5'd0    |    5'd0    |     16'd0     |
|  16  |            |    sw r4, r3(#1)     |     000100      |    5'd3    |    5'd4    |     16'd1     |
|  17  |            |    sw r5, r2(#1)     |     000100      |    5'd2    |    5'd5    |     16'd1     |
|  18  |  no_swap   |   addi r2, r2, #1    |     000001      |    5'd2    |    5'd2    |     16'd1     |
|  19  |            |   addi r3, r3, #1    |     000001      |    5'd3    |    5'd3    |     16'd1     |
|  20  |            |     j inner_loop     |     001000      |    5'd0    |    5'd0    |     16'd7     |
|  21  |            |         noop         |     000000      |    5'd0    |    5'd0    |     16'd0     |
|  22  |  next_out  |   subi r1, r1, #1    |     001001      |    5'd1    |    5'd1    |     16'd1     |
|  23  |            |     movi r2, #0      |     000010      |    5'd0    |    5'd2    |     16'd0     |
|  24  |            |     movi r3, #1      |     000010      |    5'd0    |    5'd3    |     16'd1     |
|  25  |            |     j outer_loop     |     001000      |    5'd0    |    5'd0    |     16'd5     |
|  26  |            |         noop         |     000000      |    5'd0    |    5'd0    |     16'd0     |
|  27  |    end     |        j end         |     001000      |    5'd0    |    5'd0    |    16'd27     |

## 2. Packet Part

### 2.1 Packet Header Format Design

![Packet_Format](C:\Users\StepF\Documents\GitHub\ee533\lab 8\Pic\Packet_Format.png)

### 2.2 Sample Initial Packet

![Sample_Initial_Packet](C:\Users\StepF\Documents\GitHub\ee533\lab 8\Pic\Sample_Initial_Packet.png)

### 2.3 Packet Expected to get after Processing Bubble Sort Code by Pipeline

![Packet_Expected_after_Processing](C:\Users\StepF\Documents\GitHub\ee533\lab 8\Pic\Packet_Expected_after_Processing.png)

## 3. Pipeline Part

### 3.1 D_MEM

* Verilog



* Testbench



* Waveform



* .coe file

```
memory_initialization_radix=16;
memory_initialization_vector=
4600004000001C46,
4000040600000A00,
0D030A000E030000,
0000000000000004,
0000000000000004,
0000000000000003,
0000000000000002,
0000000000000001,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000,
0000000000000000;
```



